<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Learn the fundamentals of lighting in Unreal Engine 5. Understand direct vs indirect lighting, light types, mobility settings, and performance considerations.">
    <meta name="author" content="Practical Ace">
    <title>Lighting Fundamentals - Introduction to Unreal Engine 5</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="icon" type="image/png" href="/favicon.png">
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#f0f0f0',
                primaryTextColor: '#333',
                primaryBorderColor: '#667eea'
            }
        });
    </script>
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-to-main">Skip to main content</a>

    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="index.html" class="nav-logo">Introduction to Unreal Engine 5</a>
            <button id="mobile-menu-toggle" class="mobile-menu-toggle" aria-expanded="false" aria-controls="nav-links">
                ‚ò∞
            </button>
            <div class="nav-links" id="nav-links" aria-hidden="false">
                <a href="index.html">Home</a>
                <a href="index.html#modules">All Modules</a>
                <button id="theme-toggle" aria-label="Toggle theme">üåô</button>
            </div>
        </div>
    </nav>

    <!-- Breadcrumb -->
    <nav class="breadcrumb" aria-label="Breadcrumb">
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="index.html#modules">Module 4: Lighting Your World</a></li>
            <li aria-current="page">Lesson 4.1: Lighting Fundamentals</li>
        </ul>
    </nav>

    <!-- Main Content -->
    <main id="main-content">
        <div class="container">
            <!-- Lesson Header -->
            <header>
                <h1>üí° Lighting Fundamentals</h1>
                <p class="lead">Light transforms everything. The same room can feel cozy and inviting or cold and menacing depending on how it's lit. The same character can look heroic or villainous based on lighting direction. In games and real-time experiences, lighting isn't just decoration‚Äîit guides players, establishes mood, and brings your 3D world to life. In this lesson, you'll learn how real-time lighting works under the hood, the different types of lights available, and how to choose the right approach for your project.</p>
                
                <!-- Learning objectives -->
                <div class="card">
                    <h2>üéØ Learning Objectives</h2>
                    <p>By the end of this lesson, you will be able to:</p>
                    <ul>
                        <li>Explain how real-time lighting differs from offline/pre-rendered lighting</li>
                        <li>Distinguish between direct and indirect lighting contributions</li>
                        <li>Identify and describe the four main light types: Directional, Point, Spot, and Rect</li>
                        <li>Understand light mobility settings: Static, Stationary, and Movable</li>
                        <li>Make informed decisions about lighting approaches based on performance requirements</li>
                        <li>Recognize common lighting scenarios and appropriate solutions</li>
                    </ul>
                    <p><strong>Estimated Time:</strong> 40-50 minutes</p>
                    <p><strong>Prerequisites:</strong> Module 3 - Materials and Textures</p>
                </div>
            </header>

            <!-- Sticky Table of Contents -->
            <details class="card" open style="position: sticky; top: 80px; z-index: 100; background: var(--card-bg, white); box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 2rem;">
                <summary style="cursor: pointer; font-weight: bold; padding: 0.5rem 1rem; user-select: none;">
                    <h2 style="display: inline; margin: 0;">üìë In This Lesson</h2>
                </summary>
                <nav aria-label="Table of Contents" style="padding: 0 1rem 1rem 1rem;">
                    <ol>
                        <li><a href="#realtime-lighting" class="toc-link">How Lighting Works in Real-Time Engines</a></li>
                        <li><a href="#direct-indirect" class="toc-link">Direct vs. Indirect Lighting</a></li>
                        <li><a href="#light-types" class="toc-link">Light Types Overview</a></li>
                        <li><a href="#light-mobility" class="toc-link">Light Mobility: Static, Stationary, Movable</a></li>
                        <li><a href="#performance" class="toc-link">Performance Implications</a></li>
                        <li><a href="#choosing-approach" class="toc-link">Choosing the Right Approach</a></li>
                        <li><a href="#summary" class="toc-link">Summary</a></li>
                    </ol>
                </nav>
            </details>

            <!-- Section 1: How Lighting Works in Real-Time Engines -->
            <section id="realtime-lighting" class="lesson-section">
                <h2>How Lighting Works in Real-Time Engines</h2>

                <p>Before diving into Unreal's specific lighting tools, it's crucial to understand what makes real-time lighting different from the lighting you might see in animated films or architectural visualizations. This understanding will inform every lighting decision you make.</p>

                <h3>The Real-Time Challenge</h3>

                <p>In offline rendering (like Pixar films or pre-rendered cinematics), computers can spend <strong>hours</strong> calculating how light bounces around a scene. Every ray of light can be traced as it reflects off surfaces, passes through glass, scatters in fog, and eventually reaches the camera. The results are physically accurate and beautiful‚Äîbut completely impractical for interactive experiences.</p>

                <p>Games and real-time applications need to render <strong>30 to 120 frames every second</strong>. That gives each frame roughly 8 to 33 milliseconds to calculate everything‚Äîincluding lighting. This constraint drives every technique and tradeoff in real-time rendering.</p>

                <!-- SVG: Offline vs Real-Time Comparison -->
                <svg width="100%" height="280" viewBox="0 0 850 280" style="max-width: 850px; margin: 2rem auto; display: block; border: 2px solid #667eea; border-radius: 8px; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);">
                    <text x="425" y="30" text-anchor="middle" fill="#fff" font-size="16" font-weight="bold">Offline Rendering vs. Real-Time Rendering</text>
                    
                    <!-- Offline Side -->
                    <g transform="translate(50, 55)">
                        <rect x="0" y="0" width="340" height="190" rx="10" fill="rgba(255,255,255,0.05)" stroke="#667eea" stroke-width="2"/>
                        <text x="170" y="30" text-anchor="middle" fill="#667eea" font-size="14" font-weight="bold">üé¨ Offline Rendering</text>
                        
                        <text x="20" y="60" fill="#aaa" font-size="11">Time per frame:</text>
                        <text x="200" y="60" fill="#fff" font-size="11" font-weight="bold">Minutes to Hours</text>
                        
                        <text x="20" y="85" fill="#aaa" font-size="11">Light rays traced:</text>
                        <text x="200" y="85" fill="#fff" font-size="11" font-weight="bold">Millions per pixel</text>
                        
                        <text x="20" y="110" fill="#aaa" font-size="11">Light bounces:</text>
                        <text x="200" y="110" fill="#fff" font-size="11" font-weight="bold">Unlimited</text>
                        
                        <text x="20" y="135" fill="#aaa" font-size="11">Accuracy:</text>
                        <text x="200" y="135" fill="#4CAF50" font-size="11" font-weight="bold">Physically Accurate</text>
                        
                        <text x="20" y="160" fill="#aaa" font-size="11">Use case:</text>
                        <text x="200" y="160" fill="#fff" font-size="11">Films, Arch Viz, Marketing</text>
                        
                        <rect x="20" y="170" width="300" height="4" rx="2" fill="#333"/>
                        <rect x="20" y="170" width="300" height="4" rx="2" fill="#667eea"/>
                        <text x="170" y="188" text-anchor="middle" fill="#888" font-size="9">Quality ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%</text>
                    </g>
                    
                    <!-- VS -->
                    <text x="425" y="150" text-anchor="middle" fill="#fff" font-size="20" font-weight="bold">VS</text>
                    
                    <!-- Real-Time Side -->
                    <g transform="translate(460, 55)">
                        <rect x="0" y="0" width="340" height="190" rx="10" fill="rgba(255,255,255,0.05)" stroke="#4CAF50" stroke-width="2"/>
                        <text x="170" y="30" text-anchor="middle" fill="#4CAF50" font-size="14" font-weight="bold">üéÆ Real-Time Rendering</text>
                        
                        <text x="20" y="60" fill="#aaa" font-size="11">Time per frame:</text>
                        <text x="200" y="60" fill="#fff" font-size="11" font-weight="bold">8-33 Milliseconds</text>
                        
                        <text x="20" y="85" fill="#aaa" font-size="11">Light calculation:</text>
                        <text x="200" y="85" fill="#fff" font-size="11" font-weight="bold">Approximations</text>
                        
                        <text x="20" y="110" fill="#aaa" font-size="11">Light bounces:</text>
                        <text x="200" y="110" fill="#fff" font-size="11" font-weight="bold">Limited (1-4 typical)</text>
                        
                        <text x="20" y="135" fill="#aaa" font-size="11">Accuracy:</text>
                        <text x="200" y="135" fill="#FF9800" font-size="11" font-weight="bold">Perceptually Plausible</text>
                        
                        <text x="20" y="160" fill="#aaa" font-size="11">Use case:</text>
                        <text x="200" y="160" fill="#fff" font-size="11">Games, VR, Interactive</text>
                        
                        <rect x="20" y="170" width="300" height="4" rx="2" fill="#333"/>
                        <rect x="20" y="170" width="60" height="4" rx="2" fill="#4CAF50"/>
                        <text x="170" y="188" text-anchor="middle" fill="#888" font-size="9">Time Budget ‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 16ms</text>
                    </g>
                </svg>
                <p class="caption"><em>Figure: Offline rendering prioritizes accuracy; real-time rendering prioritizes speed.</em></p>

                <h3>Real-Time Lighting Strategies</h3>

                <p>To achieve acceptable lighting within milliseconds, real-time engines use several strategies:</p>

                <p><strong>Pre-calculation (Baking):</strong> Calculate complex lighting ahead of time and store the results in textures. At runtime, just look up the pre-computed values. This is fast but only works for things that don't move.</p>

                <p><strong>Approximation:</strong> Use mathematical shortcuts that look "close enough" to real physics. For example, instead of tracing millions of light rays, approximate ambient light with a single color or a simple gradient.</p>

                <p><strong>Screen-Space Effects:</strong> Calculate effects based only on what's visible on screen. Cheaper than world-space calculations, but can have artifacts at screen edges.</p>

                <p><strong>Hybrid Approaches:</strong> Combine baked lighting for static elements with real-time lighting for dynamic elements. This is the most common approach in games.</p>

                <div class="card" style="background: #1a1a2e; border-left: 4px solid #667eea;">
                    <h4>üìñ Definition</h4>
                    <p style="color: white;"><strong>Light Baking:</strong> The process of pre-calculating lighting information and storing it in textures (called lightmaps) that are applied to static geometry at runtime. Baked lighting looks great and is very fast to render, but cannot respond to moving objects or changing light conditions.</p>
                </div>

                <h3>Unreal Engine 5's Lighting Evolution</h3>

                <p>Unreal Engine has evolved dramatically in its approach to lighting:</p>

                <p><strong>UE4 Era:</strong> Primarily relied on baked lighting (Lightmass) for quality results. Dynamic lighting was expensive and limited in bounce/indirect light.</p>

                <p><strong>UE5 with Lumen:</strong> Introduced fully dynamic global illumination and reflections. Light bounces, color bleeding, and soft shadows update in real-time without baking. This is revolutionary for real-time graphics.</p>

                <p>You'll learn to use both approaches‚ÄîLumen is powerful but has hardware requirements, and baked lighting remains valuable for mobile, VR, and performance-critical scenarios.</p>

                <!-- Mermaid: UE5 Lighting Evolution -->
                <pre class="mermaid">
timeline
    title Unreal Engine Lighting Evolution
    
    section UE4 Traditional
        Lightmass Baking : Static GI
        : Pre-calculated lightmaps
        : Hours of build time
        : Beautiful but inflexible
    
    section UE5 Lumen
        Dynamic GI : Real-time light bounces
        : No baking required
        : Instant iteration
        : Hardware requirements
    
    section Modern Approach
        Hybrid Solutions : Best of both worlds
        : Lumen for hero areas
        : Baked for performance
        : Platform-appropriate choices
                </pre>
                <p class="caption"><em>Figure: Unreal's lighting has evolved from purely baked to fully dynamic options.</em></p>

                <div class="card" style="background: #e8f5e9; border-left: 4px solid #4CAF50;">
                    <h4>‚úÖ Pro Tip: Don't Fear Baked Lighting</h4>
                    <p>With Lumen's arrival, some developers dismiss baked lighting as "outdated." This is a mistake! Baked lighting offers superior performance, works on all hardware, and can achieve quality that's difficult to match in real-time. Many AAA games still use baked lighting strategically. Learn both approaches and choose based on your project's needs.</p>
                </div>
            </section>

            <!-- Section 2: Direct vs. Indirect Lighting -->
            <section id="direct-indirect" class="lesson-section">
                <h2>Direct vs. Indirect Lighting</h2>

                <p>Understanding the difference between direct and indirect lighting is fundamental to creating realistic, visually appealing scenes. Both components work together to create the lighting we see in the real world.</p>

                <h3>Direct Lighting</h3>

                <p><strong>Direct lighting</strong> is light that travels straight from a light source to a surface without bouncing off anything else. When sunlight hits your desk, that's direct lighting. When a spotlight shines on an actor's face, that's direct lighting.</p>

                <p>Characteristics of direct lighting:</p>

                <ul>
                    <li>Creates hard shadows (penumbra softness depends on light size)</li>
                    <li>Produces bright highlights on surfaces facing the light</li>
                    <li>Defines the primary direction of illumination</li>
                    <li>Relatively cheap to calculate in real-time</li>
                </ul>

                <h3>Indirect Lighting (Global Illumination)</h3>

                <p><strong>Indirect lighting</strong>‚Äîalso called <strong>Global Illumination (GI)</strong>‚Äîis light that has bounced off at least one surface before reaching another. The light illuminating the shadow side of objects, the color bleeding from a red wall onto nearby surfaces, the soft ambient glow filling a room‚Äîall indirect lighting.</p>

                <p>Characteristics of indirect lighting:</p>

                <ul>
                    <li>Fills in shadows with soft, diffuse light</li>
                    <li>Transfers color between surfaces (color bleeding)</li>
                    <li>Creates ambient occlusion in crevices and corners</li>
                    <li>Much more expensive to calculate accurately</li>
                </ul>

                <!-- SVG: Direct vs Indirect Lighting -->
                <svg width="100%" height="350" viewBox="0 0 850 350" style="max-width: 850px; margin: 2rem auto; display: block; border: 2px solid #667eea; border-radius: 8px; background: #1e1e1e;">
                    <text x="425" y="30" text-anchor="middle" fill="#fff" font-size="16" font-weight="bold">Direct vs. Indirect Lighting</text>
                    
                    <!-- Direct Lighting Diagram -->
                    <g transform="translate(50, 60)">
                        <text x="160" y="0" text-anchor="middle" fill="#f1c40f" font-size="14" font-weight="bold">Direct Lighting</text>
                        
                        <!-- Sun/Light source -->
                        <circle cx="160" cy="40" r="25" fill="#f1c40f"/>
                        <text x="160" y="45" text-anchor="middle" fill="#333" font-size="10">‚òÄÔ∏è</text>
                        
                        <!-- Direct rays -->
                        <line x1="160" y1="65" x2="80" y2="180" stroke="#f1c40f" stroke-width="3"/>
                        <line x1="160" y1="65" x2="160" y2="180" stroke="#f1c40f" stroke-width="3"/>
                        <line x1="160" y1="65" x2="240" y2="180" stroke="#f1c40f" stroke-width="3"/>
                        
                        <!-- Ground -->
                        <rect x="30" y="180" width="260" height="20" fill="#555"/>
                        
                        <!-- Object -->
                        <rect x="130" y="130" width="60" height="50" fill="#667eea"/>
                        
                        <!-- Shadow -->
                        <polygon points="190,180 190,200 280,200 280,180" fill="#111"/>
                        
                        <!-- Labels -->
                        <text x="50" y="220" fill="#f1c40f" font-size="10">Lit surface</text>
                        <text x="220" y="220" fill="#888" font-size="10">Hard shadow</text>
                        
                        <!-- Description box -->
                        <rect x="20" y="235" width="280" height="55" rx="5" fill="rgba(241,196,15,0.1)" stroke="#f1c40f"/>
                        <text x="160" y="255" text-anchor="middle" fill="#f1c40f" font-size="10">Light travels directly from source</text>
                        <text x="160" y="270" text-anchor="middle" fill="#aaa" font-size="9">‚Ä¢ Creates highlights and shadows</text>
                        <text x="160" y="283" text-anchor="middle" fill="#aaa" font-size="9">‚Ä¢ Fast to calculate</text>
                    </g>
                    
                    <!-- Indirect Lighting Diagram -->
                    <g transform="translate(470, 60)">
                        <text x="160" y="0" text-anchor="middle" fill="#4CAF50" font-size="14" font-weight="bold">Indirect Lighting (GI)</text>
                        
                        <!-- Sun/Light source -->
                        <circle cx="280" cy="40" r="20" fill="#f1c40f" opacity="0.6"/>
                        
                        <!-- Direct ray hitting wall -->
                        <line x1="280" y1="60" x2="280" y2="180" stroke="#f1c40f" stroke-width="2" opacity="0.5"/>
                        
                        <!-- Wall -->
                        <rect x="270" y="100" width="20" height="100" fill="#e74c3c"/>
                        
                        <!-- Bounced rays (indirect) -->
                        <path d="M 270 130 Q 200 130 160 160" stroke="#4CAF50" stroke-width="2" fill="none" stroke-dasharray="5,3"/>
                        <path d="M 270 150 Q 180 150 130 180" stroke="#4CAF50" stroke-width="2" fill="none" stroke-dasharray="5,3"/>
                        <path d="M 270 170 Q 220 180 180 180" stroke="#4CAF50" stroke-width="2" fill="none" stroke-dasharray="5,3"/>
                        
                        <!-- Ground -->
                        <rect x="30" y="180" width="260" height="20" fill="#555"/>
                        
                        <!-- Object in shadow -->
                        <rect x="80" y="130" width="60" height="50" fill="#667eea"/>
                        
                        <!-- Soft illumination on object (no hard shadow) -->
                        <rect x="80" y="130" width="60" height="50" fill="url(#indirectGlow)" opacity="0.3"/>
                        
                        <!-- Color bleeding indication -->
                        <ellipse cx="110" cy="155" rx="35" ry="25" fill="#e74c3c" opacity="0.15"/>
                        
                        <defs>
                            <radialGradient id="indirectGlow" cx="100%" cy="50%">
                                <stop offset="0%" style="stop-color:#4CAF50;stop-opacity:0.5"/>
                                <stop offset="100%" style="stop-color:#4CAF50;stop-opacity:0"/>
                            </radialGradient>
                        </defs>
                        
                        <!-- Labels -->
                        <text x="110" y="125" text-anchor="middle" fill="#4CAF50" font-size="9">Light bounces</text>
                        <text x="110" y="195" fill="#e74c3c" font-size="9">Color bleed</text>
                        <text x="285" y="130" fill="#e74c3c" font-size="8">Red</text>
                        <text x="285" y="140" fill="#e74c3c" font-size="8">wall</text>
                        
                        <!-- Description box -->
                        <rect x="20" y="235" width="280" height="55" rx="5" fill="rgba(76,175,80,0.1)" stroke="#4CAF50"/>
                        <text x="160" y="255" text-anchor="middle" fill="#4CAF50" font-size="10">Light bounces off surfaces</text>
                        <text x="160" y="270" text-anchor="middle" fill="#aaa" font-size="9">‚Ä¢ Fills shadows, transfers color</text>
                        <text x="160" y="283" text-anchor="middle" fill="#aaa" font-size="9">‚Ä¢ Expensive to calculate accurately</text>
                    </g>
                </svg>
                <p class="caption"><em>Figure: Direct light creates clear shadows; indirect light fills them and transfers color between surfaces.</em></p>

                <h3>Why Both Matter</h3>

                <p>A scene lit only with direct lighting looks harsh and artificial‚Äîareas not directly facing the light become pitch black. This was a common look in early 3D games, and you'll recognize it immediately as "gamey."</p>

                <p>Indirect lighting is what makes CG imagery look photorealistic. Even on a cloudy day when there's no visible sun, light bounces between the clouds, ground, and buildings to illuminate everything with soft, directional light. Indoor scenes rely almost entirely on indirect lighting‚Äîlight entering through windows bounces around the room many times.</p>

                <div class="card" style="background: #e3f2fd; border-left: 4px solid #2196F3;">
                    <h4>üí° The 80/20 of Lighting</h4>
                    <p>In many real-world scenarios, indirect lighting contributes more to the overall illumination than direct lighting! Consider a room with a single window: direct sunlight might hit a small area of floor, but the rest of the room is lit entirely by bounced light. Getting indirect lighting right is often more important than perfecting your direct lights.</p>
                </div>

                <h3>How Unreal Handles Each Type</h3>

                <p><strong>Direct lighting</strong> in Unreal is straightforward‚Äîplace lights, and surfaces facing them get illuminated. Shadow maps handle the shadows. This works the same whether you're using baked or dynamic lighting.</p>

                <p><strong>Indirect lighting</strong> in Unreal can come from several sources:</p>

                <p><strong>Lightmass (Baked):</strong> Pre-calculates light bounces and stores them in lightmaps. High quality, zero runtime cost, but static.</p>

                <p><strong>Lumen (Dynamic):</strong> Calculates light bounces in real-time using software ray tracing or hardware ray tracing. Fully dynamic but has performance cost.</p>

                <p><strong>Screen Space Global Illumination (SSGI):</strong> Approximates GI using only screen information. Cheaper than Lumen but less accurate.</p>

                <p><strong>Ambient Cubemaps/Skylights:</strong> Simple approximations that add uniform or directional ambient light. Very cheap but not physically accurate.</p>

                <!-- Mermaid: Indirect Lighting Methods -->
                <pre class="mermaid">
flowchart LR
    subgraph Quality["Quality (Best to Approximate)"]
        direction TB
        Q1["Lumen Hardware RT"]
        Q2["Lumen Software RT"]
        Q3["Lightmass Baked"]
        Q4["SSGI"]
        Q5["Skylight + Ambient"]
    end
    
    subgraph Cost["Performance Cost"]
        direction TB
        C1["High"]
        C2["Medium-High"]
        C3["Zero Runtime"]
        C4["Medium"]
        C5["Low"]
    end
    
    subgraph Flexibility["Dynamic Capability"]
        direction TB
        F1["Fully Dynamic"]
        F2["Fully Dynamic"]
        F3["Static Only"]
        F4["Limited Dynamic"]
        F5["Static/Simple"]
    end
    
    Q1 --- C1 --- F1
    Q2 --- C2 --- F2
    Q3 --- C3 --- F3
    Q4 --- C4 --- F4
    Q5 --- C5 --- F5
    
    style Q1 fill:#4CAF50,color:#fff
    style Q2 fill:#8BC34A,color:#fff
    style Q3 fill:#FF9800,color:#fff
    style Q4 fill:#FFC107,color:#333
    style Q5 fill:#f44336,color:#fff
                </pre>
                <p class="caption"><em>Figure: Different indirect lighting methods trade quality for performance and flexibility.</em></p>
            </section>

            <!-- Section 3: Light Types Overview -->
            <section id="light-types" class="lesson-section">
                <h2>Light Types Overview</h2>

                <p>Unreal Engine provides four primary light types, each designed for different real-world lighting scenarios. Understanding their characteristics helps you choose the right tool for each situation.</p>

                <h3>Directional Light</h3>

                <p>A <strong>Directional Light</strong> simulates light from an infinitely distant source‚Äîlike the sun. All light rays are parallel, and the light's position in the world doesn't matter, only its rotation (direction). Moving a directional light around has no effect; rotating it changes where shadows fall.</p>

                <p><strong>Real-world equivalents:</strong> Sun, moon, distant stadium lights</p>

                <p><strong>Characteristics:</strong></p>
                <ul>
                    <li>Parallel light rays (no falloff with distance)</li>
                    <li>Illuminates the entire world uniformly</li>
                    <li>Only rotation matters, not position</li>
                    <li>Creates long, parallel shadows</li>
                    <li>Typically paired with Sky Atmosphere for outdoor scenes</li>
                </ul>

                <!-- SVG: Directional Light -->
                <svg width="100%" height="200" viewBox="0 0 400 200" style="max-width: 400px; margin: 2rem auto; display: block; border: 2px solid #667eea; border-radius: 8px; background: #1e1e1e;">
                    <text x="200" y="25" text-anchor="middle" fill="#f1c40f" font-size="14" font-weight="bold">‚òÄÔ∏è Directional Light</text>
                    
                    <!-- Parallel rays -->
                    <line x1="50" y1="50" x2="50" y2="150" stroke="#f1c40f" stroke-width="2"/>
                    <line x1="100" y1="50" x2="100" y2="150" stroke="#f1c40f" stroke-width="2"/>
                    <line x1="150" y1="50" x2="150" y2="150" stroke="#f1c40f" stroke-width="2"/>
                    <line x1="200" y1="50" x2="200" y2="150" stroke="#f1c40f" stroke-width="2"/>
                    <line x1="250" y1="50" x2="250" y2="150" stroke="#f1c40f" stroke-width="2"/>
                    <line x1="300" y1="50" x2="300" y2="150" stroke="#f1c40f" stroke-width="2"/>
                    <line x1="350" y1="50" x2="350" y2="150" stroke="#f1c40f" stroke-width="2"/>
                    
                    <!-- Arrow heads -->
                    <polygon points="50,150 45,140 55,140" fill="#f1c40f"/>
                    <polygon points="100,150 95,140 105,140" fill="#f1c40f"/>
                    <polygon points="150,150 145,140 155,140" fill="#f1c40f"/>
                    <polygon points="200,150 195,140 205,140" fill="#f1c40f"/>
                    <polygon points="250,150 245,140 255,140" fill="#f1c40f"/>
                    <polygon points="300,150 295,140 305,140" fill="#f1c40f"/>
                    <polygon points="350,150 345,140 355,140" fill="#f1c40f"/>
                    
                    <!-- Ground -->
                    <rect x="20" y="155" width="360" height="10" fill="#555"/>
                    
                    <!-- Label -->
                    <text x="200" y="185" text-anchor="middle" fill="#aaa" font-size="10">Parallel rays ‚Ä¢ Infinite distance ‚Ä¢ Uniform intensity</text>
                </svg>
                <p class="caption"><em>Figure: Directional Light casts parallel rays, simulating infinitely distant sources like the sun.</em></p>

                <h3>Point Light</h3>

                <p>A <strong>Point Light</strong> emits light equally in all directions from a single point‚Äîlike a bare light bulb. Light intensity falls off with distance following the inverse square law (or Unreal's adjustable falloff).</p>

                <p><strong>Real-world equivalents:</strong> Light bulbs, candles, torches, explosions</p>

                <p><strong>Characteristics:</strong></p>
                <ul>
                    <li>Omnidirectional emission (360¬∞ in all directions)</li>
                    <li>Intensity decreases with distance</li>
                    <li>Attenuation Radius defines how far the light reaches</li>
                    <li>Position matters significantly</li>
                    <li>Good for general room illumination</li>
                </ul>

                <!-- SVG: Point Light -->
                <svg width="100%" height="200" viewBox="0 0 400 200" style="max-width: 400px; margin: 2rem auto; display: block; border: 2px solid #667eea; border-radius: 8px; background: #1e1e1e;">
                    <text x="200" y="25" text-anchor="middle" fill="#f1c40f" font-size="14" font-weight="bold">üí° Point Light</text>
                    
                    <!-- Light source -->
                    <circle cx="200" cy="100" r="15" fill="#f1c40f"/>
                    
                    <!-- Rays in all directions -->
                    <line x1="200" y1="100" x2="200" y2="40" stroke="#f1c40f" stroke-width="2"/>
                    <line x1="200" y1="100" x2="260" y2="60" stroke="#f1c40f" stroke-width="2"/>
                    <line x1="200" y1="100" x2="290" y2="100" stroke="#f1c40f" stroke-width="2"/>
                    <line x1="200" y1="100" x2="260" y2="140" stroke="#f1c40f" stroke-width="2"/>
                    <line x1="200" y1="100" x2="200" y2="160" stroke="#f1c40f" stroke-width="2"/>
                    <line x1="200" y1="100" x2="140" y2="140" stroke="#f1c40f" stroke-width="2"/>
                    <line x1="200" y1="100" x2="110" y2="100" stroke="#f1c40f" stroke-width="2"/>
                    <line x1="200" y1="100" x2="140" y2="60" stroke="#f1c40f" stroke-width="2"/>
                    
                    <!-- Attenuation radius indicator -->
                    <circle cx="200" cy="100" r="80" fill="none" stroke="#f1c40f" stroke-width="1" stroke-dasharray="5,5" opacity="0.5"/>
                    
                    <text x="290" y="55" fill="#888" font-size="9">Attenuation</text>
                    <text x="290" y="67" fill="#888" font-size="9">Radius</text>
                    
                    <!-- Label -->
                    <text x="200" y="190" text-anchor="middle" fill="#aaa" font-size="10">Omnidirectional ‚Ä¢ Distance falloff ‚Ä¢ Position-dependent</text>
                </svg>
                <p class="caption"><em>Figure: Point Light emits in all directions with intensity falling off over distance.</em></p>

                <h3>Spot Light</h3>

                <p>A <strong>Spot Light</strong> emits light in a cone shape from a single point. It combines the point-source nature of a Point Light with directional control. The cone has an inner angle (full intensity) and outer angle (falloff to zero).</p>

                <p><strong>Real-world equivalents:</strong> Flashlights, stage spotlights, car headlights, recessed ceiling lights</p>

                <p><strong>Characteristics:</strong></p>
                <ul>
                    <li>Conical emission pattern</li>
                    <li>Inner Cone Angle: full brightness area</li>
                    <li>Outer Cone Angle: soft falloff edge</li>
                    <li>Both position and rotation matter</li>
                    <li>Great for focused, dramatic lighting</li>
                </ul>

                <!-- SVG: Spot Light -->
                <svg width="100%" height="200" viewBox="0 0 400 200" style="max-width: 400px; margin: 2rem auto; display: block; border: 2px solid #667eea; border-radius: 8px; background: #1e1e1e;">
                    <text x="200" y="25" text-anchor="middle" fill="#f1c40f" font-size="14" font-weight="bold">üî¶ Spot Light</text>
                    
                    <!-- Light source -->
                    <circle cx="200" cy="55" r="12" fill="#f1c40f"/>
                    
                    <!-- Cone shape -->
                    <polygon points="200,67 120,170 280,170" fill="url(#spotGradient)" opacity="0.6"/>
                    
                    <!-- Inner cone -->
                    <polygon points="200,67 160,170 240,170" fill="#f1c40f" opacity="0.3"/>
                    
                    <defs>
                        <linearGradient id="spotGradient" x1="50%" y1="0%" x2="50%" y2="100%">
                            <stop offset="0%" style="stop-color:#f1c40f;stop-opacity:0.8"/>
                            <stop offset="100%" style="stop-color:#f1c40f;stop-opacity:0.1"/>
                        </linearGradient>
                    </defs>
                    
                    <!-- Angle indicators -->
                    <line x1="200" y1="67" x2="120" y2="170" stroke="#888" stroke-width="1" stroke-dasharray="3,3"/>
                    <line x1="200" y1="67" x2="280" y2="170" stroke="#888" stroke-width="1" stroke-dasharray="3,3"/>
                    <line x1="200" y1="67" x2="160" y2="170" stroke="#f1c40f" stroke-width="1" stroke-dasharray="3,3"/>
                    <line x1="200" y1="67" x2="240" y2="170" stroke="#f1c40f" stroke-width="1" stroke-dasharray="3,3"/>
                    
                    <text x="100" y="140" fill="#888" font-size="8">Outer</text>
                    <text x="155" y="140" fill="#f1c40f" font-size="8">Inner</text>
                    
                    <!-- Label -->
                    <text x="200" y="190" text-anchor="middle" fill="#aaa" font-size="10">Conical emission ‚Ä¢ Inner/Outer angles ‚Ä¢ Focused lighting</text>
                </svg>
                <p class="caption"><em>Figure: Spot Light creates a cone of light with soft edges defined by inner and outer angles.</em></p>

                <h3>Rect Light (Area Light)</h3>

                <p>A <strong>Rect Light</strong> (Rectangle Light) emits light from a rectangular surface rather than a point. This creates softer, more natural shadows because the light source has physical size. The larger the rectangle, the softer the shadows.</p>

                <p><strong>Real-world equivalents:</strong> Windows, TV screens, fluorescent panel lights, softboxes in photography</p>

                <p><strong>Characteristics:</strong></p>
                <ul>
                    <li>Emits from a rectangular area</li>
                    <li>Creates soft shadows (penumbra)</li>
                    <li>More physically accurate than point sources</li>
                    <li>Source Width and Height control shadow softness</li>
                    <li>More expensive than Point/Spot lights</li>
                </ul>

                <!-- SVG: Rect Light -->
                <svg width="100%" height="200" viewBox="0 0 400 200" style="max-width: 400px; margin: 2rem auto; display: block; border: 2px solid #667eea; border-radius: 8px; background: #1e1e1e;">
                    <text x="200" y="25" text-anchor="middle" fill="#f1c40f" font-size="14" font-weight="bold">üì∫ Rect Light (Area Light)</text>
                    
                    <!-- Light rectangle -->
                    <rect x="140" y="50" width="120" height="60" fill="#f1c40f" rx="3"/>
                    
                    <!-- Light rays from multiple points on surface -->
                    <line x1="150" y1="110" x2="100" y2="160" stroke="#f1c40f" stroke-width="1" opacity="0.5"/>
                    <line x1="170" y1="110" x2="130" y2="160" stroke="#f1c40f" stroke-width="1" opacity="0.6"/>
                    <line x1="200" y1="110" x2="180" y2="160" stroke="#f1c40f" stroke-width="1" opacity="0.7"/>
                    <line x1="200" y1="110" x2="200" y2="160" stroke="#f1c40f" stroke-width="1"/>
                    <line x1="200" y1="110" x2="220" y2="160" stroke="#f1c40f" stroke-width="1" opacity="0.7"/>
                    <line x1="230" y1="110" x2="270" y2="160" stroke="#f1c40f" stroke-width="1" opacity="0.6"/>
                    <line x1="250" y1="110" x2="300" y2="160" stroke="#f1c40f" stroke-width="1" opacity="0.5"/>
                    
                    <!-- Soft shadow indication -->
                    <rect x="160" y="165" width="80" height="8" fill="#111" rx="2"/>
                    <rect x="150" y="165" width="100" height="8" fill="#222" rx="2" opacity="0.5"/>
                    <text x="200" y="185" text-anchor="middle" fill="#888" font-size="8">Soft shadow with penumbra</text>
                    
                    <!-- Size indicator -->
                    <line x1="140" y1="45" x2="260" y2="45" stroke="#888" stroke-width="1"/>
                    <text x="200" y="42" text-anchor="middle" fill="#888" font-size="8">Source Width</text>
                </svg>
                <p class="caption"><em>Figure: Rect Light emits from a surface area, creating physically accurate soft shadows.</em></p>

                <h3>Light Type Comparison</h3>

                <!-- SVG: Comparison Table -->
                <svg width="100%" height="220" viewBox="0 0 850 220" style="max-width: 850px; margin: 2rem auto; display: block; border: 2px solid #667eea; border-radius: 8px; background: #f9f9f9;">
                    <text x="425" y="25" text-anchor="middle" fill="#333" font-size="14" font-weight="bold">Light Type Quick Reference</text>
                    
                    <!-- Headers -->
                    <rect x="20" y="40" width="140" height="30" fill="#667eea"/>
                    <text x="90" y="60" text-anchor="middle" fill="#fff" font-size="11" font-weight="bold">Light Type</text>
                    
                    <rect x="160" y="40" width="170" height="30" fill="#667eea"/>
                    <text x="245" y="60" text-anchor="middle" fill="#fff" font-size="11" font-weight="bold">Best For</text>
                    
                    <rect x="330" y="40" width="170" height="30" fill="#667eea"/>
                    <text x="415" y="60" text-anchor="middle" fill="#fff" font-size="11" font-weight="bold">Shadow Type</text>
                    
                    <rect x="500" y="40" width="170" height="30" fill="#667eea"/>
                    <text x="585" y="60" text-anchor="middle" fill="#fff" font-size="11" font-weight="bold">Performance</text>
                    
                    <rect x="670" y="40" width="160" height="30" fill="#667eea"/>
                    <text x="750" y="60" text-anchor="middle" fill="#fff" font-size="11" font-weight="bold">Key Property</text>
                    
                    <!-- Directional -->
                    <rect x="20" y="70" width="140" height="35" fill="#fff" stroke="#ddd"/>
                    <text x="90" y="92" text-anchor="middle" fill="#333" font-size="10">‚òÄÔ∏è Directional</text>
                    <rect x="160" y="70" width="170" height="35" fill="#fff" stroke="#ddd"/>
                    <text x="245" y="92" text-anchor="middle" fill="#555" font-size="9">Sun, outdoor scenes</text>
                    <rect x="330" y="70" width="170" height="35" fill="#fff" stroke="#ddd"/>
                    <text x="415" y="92" text-anchor="middle" fill="#555" font-size="9">Cascaded shadow maps</text>
                    <rect x="500" y="70" width="170" height="35" fill="#c8e6c9" stroke="#ddd"/>
                    <text x="585" y="92" text-anchor="middle" fill="#2e7d32" font-size="9">Good (one per scene)</text>
                    <rect x="670" y="70" width="160" height="35" fill="#fff" stroke="#ddd"/>
                    <text x="750" y="92" text-anchor="middle" fill="#555" font-size="9">Rotation only</text>
                    
                    <!-- Point -->
                    <rect x="20" y="105" width="140" height="35" fill="#f5f5f5" stroke="#ddd"/>
                    <text x="90" y="127" text-anchor="middle" fill="#333" font-size="10">üí° Point</text>
                    <rect x="160" y="105" width="170" height="35" fill="#f5f5f5" stroke="#ddd"/>
                    <text x="245" y="127" text-anchor="middle" fill="#555" font-size="9">Bulbs, general fill</text>
                    <rect x="330" y="105" width="170" height="35" fill="#f5f5f5" stroke="#ddd"/>
                    <text x="415" y="127" text-anchor="middle" fill="#555" font-size="9">Cubemap shadows</text>
                    <rect x="500" y="105" width="170" height="35" fill="#fff3e0" stroke="#ddd"/>
                    <text x="585" y="127" text-anchor="middle" fill="#e65100" font-size="9">Medium</text>
                    <rect x="670" y="105" width="160" height="35" fill="#f5f5f5" stroke="#ddd"/>
                    <text x="750" y="127" text-anchor="middle" fill="#555" font-size="9">Attenuation Radius</text>
                    
                    <!-- Spot -->
                    <rect x="20" y="140" width="140" height="35" fill="#fff" stroke="#ddd"/>
                    <text x="90" y="162" text-anchor="middle" fill="#333" font-size="10">üî¶ Spot</text>
                    <rect x="160" y="140" width="170" height="35" fill="#fff" stroke="#ddd"/>
                    <text x="245" y="162" text-anchor="middle" fill="#555" font-size="9">Flashlights, accents</text>
                    <rect x="330" y="140" width="170" height="35" fill="#fff" stroke="#ddd"/>
                    <text x="415" y="162" text-anchor="middle" fill="#555" font-size="9">Perspective shadows</text>
                    <rect x="500" y="140" width="170" height="35" fill="#c8e6c9" stroke="#ddd"/>
                    <text x="585" y="162" text-anchor="middle" fill="#2e7d32" font-size="9">Good</text>
                    <rect x="670" y="140" width="160" height="35" fill="#fff" stroke="#ddd"/>
                    <text x="750" y="162" text-anchor="middle" fill="#555" font-size="9">Inner/Outer Cone</text>
                    
                    <!-- Rect -->
                    <rect x="20" y="175" width="140" height="35" fill="#f5f5f5" stroke="#ddd"/>
                    <text x="90" y="197" text-anchor="middle" fill="#333" font-size="10">üì∫ Rect</text>
                    <rect x="160" y="175" width="170" height="35" fill="#f5f5f5" stroke="#ddd"/>
                    <text x="245" y="197" text-anchor="middle" fill="#555" font-size="9">Windows, soft lighting</text>
                    <rect x="330" y="175" width="170" height="35" fill="#f5f5f5" stroke="#ddd"/>
                    <text x="415" y="197" text-anchor="middle" fill="#555" font-size="9">Soft area shadows</text>
                    <rect x="500" y="175" width="170" height="35" fill="#ffcdd2" stroke="#ddd"/>
                    <text x="585" y="197" text-anchor="middle" fill="#c62828" font-size="9">Higher cost</text>
                    <rect x="670" y="175" width="160" height="35" fill="#f5f5f5" stroke="#ddd"/>
                    <text x="750" y="197" text-anchor="middle" fill="#555" font-size="9">Source Width/Height</text>
                </svg>
                <p class="caption"><em>Figure: Each light type has specific strengths and performance characteristics.</em></p>

                <div class="card" style="background: #e8f5e9; border-left: 4px solid #4CAF50;">
                    <h4>‚úÖ Pro Tip: Start with Fewer Lights</h4>
                    <p>A common beginner mistake is adding too many lights. Start with your key light (usually a Directional Light for outdoor or one main Point/Spot for indoor), then add fill lights only where needed. A well-placed single light often looks better than a dozen poorly placed ones. Quality over quantity!</p>
                </div>
            </section>
            <!-- Section 4: Light Mobility -->
            <section id="light-mobility" class="lesson-section">
                <h2>Light Mobility: Static, Stationary, Movable</h2>

                <p>Every light in Unreal Engine has a <strong>Mobility</strong> setting that fundamentally affects how it's processed, what features it supports, and its performance impact. This single dropdown‚Äîfound in the Details panel under Transform‚Äîis one of the most important decisions you'll make for each light.</p>

                <div class="card" style="background: #1a1a2e; border-left: 4px solid #667eea;">
                    <h4>üìñ Definition</h4>
                    <p style="color: white;"><strong>Light Mobility:</strong> A setting that determines whether a light's position, rotation, color, and intensity can change at runtime, and consequently how its lighting contribution is calculated and stored.</p>
                </div>

                <h3>Static Lights</h3>

                <p><strong>Static</strong> lights are completely baked into lightmaps during the lighting build process. At runtime, they have zero cost‚Äîthe lighting information is just texture data applied to surfaces. However, nothing about a static light can change during gameplay.</p>

                <p><strong>Characteristics:</strong></p>
                <ul>
                    <li>Fully baked into lightmaps (requires lighting build)</li>
                    <li>Zero runtime cost for direct and indirect lighting</li>
                    <li>Cannot move, rotate, or change color/intensity at runtime</li>
                    <li>Supports full global illumination in baked results</li>
                    <li>Only affects static geometry (objects also set to Static)</li>
                    <li>Dynamic objects receive no direct light from static lights</li>
                </ul>

                <p><strong>Best for:</strong> Architectural visualization, unchanging environmental lighting, performance-critical scenarios where lights never need to change.</p>

                <!-- SVG: Static Light Diagram -->
                <svg width="100%" height="220" viewBox="0 0 700 220" style="max-width: 700px; margin: 2rem auto; display: block; border: 2px solid #667eea; border-radius: 8px; background: #1e1e1e;">
                    <text x="350" y="25" text-anchor="middle" fill="#4CAF50" font-size="14" font-weight="bold">Static Light Workflow</text>
                    
                    <!-- Editor Time -->
                    <g transform="translate(50, 50)">
                        <rect x="0" y="0" width="180" height="100" rx="8" fill="rgba(76,175,80,0.2)" stroke="#4CAF50" stroke-width="2"/>
                        <text x="90" y="25" text-anchor="middle" fill="#4CAF50" font-size="11" font-weight="bold">Editor (Build Time)</text>
                        
                        <circle cx="50" cy="60" r="15" fill="#f1c40f"/>
                        <text x="50" y="65" text-anchor="middle" fill="#333" font-size="10">üí°</text>
                        
                        <text x="90" y="55" fill="#aaa" font-size="9">Light placed</text>
                        <text x="90" y="70" fill="#aaa" font-size="9">in scene</text>
                        
                        <text x="90" y="90" fill="#888" font-size="8">‚Üì Build Lighting</text>
                    </g>
                    
                    <!-- Arrow -->
                    <path d="M 240 100 L 280 100" stroke="#4CAF50" stroke-width="2" marker-end="url(#arrowGreen)"/>
                    <defs>
                        <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#4CAF50"/>
                        </marker>
                    </defs>
                    
                    <!-- Lightmap Storage -->
                    <g transform="translate(290, 50)">
                        <rect x="0" y="0" width="140" height="100" rx="8" fill="rgba(255,255,255,0.1)" stroke="#888" stroke-width="2"/>
                        <text x="70" y="25" text-anchor="middle" fill="#fff" font-size="11" font-weight="bold">Lightmap</text>
                        
                        <!-- Texture representation -->
                        <rect x="30" y="40" width="80" height="50" fill="url(#lightmapGradient)" stroke="#555"/>
                        <defs>
                            <linearGradient id="lightmapGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#f1c40f;stop-opacity:0.8"/>
                                <stop offset="50%" style="stop-color:#f39c12;stop-opacity:0.5"/>
                                <stop offset="100%" style="stop-color:#333;stop-opacity:1"/>
                            </linearGradient>
                        </defs>
                        
                        <text x="70" y="105" text-anchor="middle" fill="#888" font-size="8">Stored as texture</text>
                    </g>
                    
                    <!-- Arrow -->
                    <path d="M 440 100 L 480 100" stroke="#4CAF50" stroke-width="2" marker-end="url(#arrowGreen)"/>
                    
                    <!-- Runtime -->
                    <g transform="translate(490, 50)">
                        <rect x="0" y="0" width="160" height="100" rx="8" fill="rgba(76,175,80,0.2)" stroke="#4CAF50" stroke-width="2"/>
                        <text x="80" y="25" text-anchor="middle" fill="#4CAF50" font-size="11" font-weight="bold">Runtime</text>
                        
                        <text x="80" y="50" text-anchor="middle" fill="#fff" font-size="10">Just texture lookup!</text>
                        <text x="80" y="70" text-anchor="middle" fill="#4CAF50" font-size="12" font-weight="bold">Zero light cost</text>
                        
                        <text x="80" y="95" text-anchor="middle" fill="#e74c3c" font-size="9">‚ùå Cannot change</text>
                    </g>
                    
                    <!-- Bottom note -->
                    <rect x="50" y="165" width="600" height="40" rx="5" fill="rgba(76,175,80,0.1)" stroke="#4CAF50"/>
                    <text x="350" y="185" text-anchor="middle" fill="#4CAF50" font-size="10">‚úì Best performance ‚Ä¢ ‚úì Full GI quality ‚Ä¢ ‚úó No runtime changes ‚Ä¢ ‚úó Dynamic objects unlit</text>
                </svg>
                <p class="caption"><em>Figure: Static lights are baked once and have zero runtime cost, but cannot change.</em></p>

                <h3>Stationary Lights</h3>

                <p><strong>Stationary</strong> lights are a hybrid approach. Their indirect lighting (bounced light, color bleeding) is baked into lightmaps, but their direct lighting and shadows are calculated at runtime. This gives you the quality of baked GI with the flexibility of dynamic shadows.</p>

                <p><strong>Characteristics:</strong></p>
                <ul>
                    <li>Indirect lighting is baked (requires lighting build)</li>
                    <li>Direct lighting calculated at runtime</li>
                    <li>Can change color and intensity at runtime</li>
                    <li>Cannot move or rotate at runtime</li>
                    <li>Supports dynamic shadows on moving objects</li>
                    <li>Limited to 4 overlapping stationary lights per surface</li>
                </ul>

                <p><strong>Best for:</strong> Most game lighting scenarios‚Äîoutdoor sun, interior lights that might flicker or change color, any light where you want baked GI but need dynamic object shadows.</p>

                <div class="card" style="background-color: #fff3cd; border-left: 4px solid #ffc107;">
                    <h4>‚ö†Ô∏è Watch Out: The 4-Light Overlap Limit</h4>
                    <p>A surface can only be affected by <strong>4 overlapping stationary lights</strong> with shadow casting enabled. If you exceed this, some lights will fall back to fully dynamic (Movable) behavior, losing their baked indirect contribution. The editor shows red X icons on lights that exceed this limit. Plan your stationary light placement carefully!</p>
                </div>

                <!-- SVG: Stationary Light Diagram -->
                <svg width="100%" height="240" viewBox="0 0 750 240" style="max-width: 750px; margin: 2rem auto; display: block; border: 2px solid #667eea; border-radius: 8px; background: #1e1e1e;">
                    <text x="375" y="25" text-anchor="middle" fill="#FF9800" font-size="14" font-weight="bold">Stationary Light: Hybrid Approach</text>
                    
                    <!-- Baked Component -->
                    <g transform="translate(50, 50)">
                        <rect x="0" y="0" width="200" height="130" rx="8" fill="rgba(76,175,80,0.15)" stroke="#4CAF50" stroke-width="2"/>
                        <text x="100" y="25" text-anchor="middle" fill="#4CAF50" font-size="11" font-weight="bold">Baked (Build Time)</text>
                        
                        <text x="20" y="50" fill="#aaa" font-size="10">Indirect lighting:</text>
                        <text x="20" y="68" fill="#4CAF50" font-size="10">‚úì Light bounces</text>
                        <text x="20" y="83" fill="#4CAF50" font-size="10">‚úì Color bleeding</text>
                        <text x="20" y="98" fill="#4CAF50" font-size="10">‚úì Ambient occlusion</text>
                        
                        <text x="100" y="120" text-anchor="middle" fill="#888" font-size="9">Stored in lightmaps</text>
                    </g>
                    
                    <!-- Plus sign -->
                    <text x="275" y="115" text-anchor="middle" fill="#FF9800" font-size="30">+</text>
                    
                    <!-- Runtime Component -->
                    <g transform="translate(310, 50)">
                        <rect x="0" y="0" width="200" height="130" rx="8" fill="rgba(255,152,0,0.15)" stroke="#FF9800" stroke-width="2"/>
                        <text x="100" y="25" text-anchor="middle" fill="#FF9800" font-size="11" font-weight="bold">Dynamic (Runtime)</text>
                        
                        <text x="20" y="50" fill="#aaa" font-size="10">Direct lighting:</text>
                        <text x="20" y="68" fill="#FF9800" font-size="10">‚úì Real-time shadows</text>
                        <text x="20" y="83" fill="#FF9800" font-size="10">‚úì Color changes</text>
                        <text x="20" y="98" fill="#FF9800" font-size="10">‚úì Intensity changes</text>
                        
                        <text x="100" y="120" text-anchor="middle" fill="#e74c3c" font-size="9">‚ùå Cannot move/rotate</text>
                    </g>
                    
                    <!-- Equals sign -->
                    <text x="535" y="115" text-anchor="middle" fill="#FF9800" font-size="30">=</text>
                    
                    <!-- Result -->
                    <g transform="translate(565, 50)">
                        <rect x="0" y="0" width="150" height="130" rx="8" fill="rgba(255,152,0,0.3)" stroke="#FF9800" stroke-width="2"/>
                        <text x="75" y="25" text-anchor="middle" fill="#FF9800" font-size="11" font-weight="bold">Best of Both</text>
                        
                        <text x="75" y="55" text-anchor="middle" fill="#fff" font-size="10">High quality GI</text>
                        <text x="75" y="75" text-anchor="middle" fill="#fff" font-size="10">Dynamic shadows</text>
                        <text x="75" y="95" text-anchor="middle" fill="#fff" font-size="10">Moderate cost</text>
                        
                        <text x="75" y="120" text-anchor="middle" fill="#4CAF50" font-size="10">Most common choice</text>
                    </g>
                    
                    <!-- Bottom note -->
                    <rect x="50" y="190" width="650" height="35" rx="5" fill="rgba(255,152,0,0.1)" stroke="#FF9800"/>
                    <text x="375" y="212" text-anchor="middle" fill="#FF9800" font-size="10">‚ö†Ô∏è Max 4 overlapping shadow-casting stationary lights per surface</text>
                </svg>
                <p class="caption"><em>Figure: Stationary lights combine baked indirect lighting with runtime direct lighting and shadows.</em></p>

                <h3>Movable Lights</h3>

                <p><strong>Movable</strong> lights are fully dynamic‚Äîeverything is calculated at runtime. They can move, rotate, change color and intensity freely. However, they have no baked contribution, which means no pre-calculated global illumination (unless you're using Lumen).</p>

                <p><strong>Characteristics:</strong></p>
                <ul>
                    <li>All lighting calculated at runtime</li>
                    <li>Can move, rotate, and change all properties freely</li>
                    <li>No baked contribution (no lightmap data)</li>
                    <li>Without Lumen: no indirect lighting/GI</li>
                    <li>With Lumen: full dynamic GI</li>
                    <li>Highest runtime cost (especially shadows)</li>
                    <li>No overlap limits</li>
                </ul>

                <p><strong>Best for:</strong> Flashlights, vehicle headlights, swinging lamps, any light that must physically move. Also the only option when using Lumen without baking.</p>

                <!-- Mermaid: Mobility Comparison -->
                <pre class="mermaid">
flowchart TB
    subgraph Static["STATIC"]
        S1["Position: Fixed"]
        S2["Color/Intensity: Fixed"]
        S3["Shadows: Baked"]
        S4["GI: Baked"]
        S5["Cost: Zero runtime"]
    end
    
    subgraph Stationary["STATIONARY"]
        ST1["Position: Fixed"]
        ST2["Color/Intensity: Dynamic"]
        ST3["Shadows: Dynamic"]
        ST4["GI: Baked"]
        ST5["Cost: Medium"]
    end
    
    subgraph Movable["MOVABLE"]
        M1["Position: Dynamic"]
        M2["Color/Intensity: Dynamic"]
        M3["Shadows: Dynamic"]
        M4["GI: None (or Lumen)"]
        M5["Cost: High"]
    end
    
    style Static fill:#4CAF50,color:#fff
    style Stationary fill:#FF9800,color:#fff
    style Movable fill:#f44336,color:#fff
                </pre>
                <p class="caption"><em>Figure: The three mobility types offer different tradeoffs between flexibility and performance.</em></p>

                <h3>How to Change Light Mobility</h3>

                <p>Select any light in your level and look at the Details panel. Under the <strong>Transform</strong> section, you'll find the <strong>Mobility</strong> dropdown. The icon next to the light in the viewport also indicates its mobility:</p>

                <ul>
                    <li><strong>Static:</strong> Light bulb icon with no additional indicator</li>
                    <li><strong>Stationary:</strong> Light bulb with a small dot</li>
                    <li><strong>Movable:</strong> Light bulb with radiating lines</li>
                </ul>

                <div class="card" style="background: #e8f5e9; border-left: 4px solid #4CAF50;">
                    <h4>‚úÖ Pro Tip: Mobility Affects More Than Lights</h4>
                    <p>The Mobility setting applies to all actors, not just lights. Static Mesh Actors must be set to <strong>Static</strong> to receive baked lighting. If a mesh is Movable, it won't be included in lightmap calculations and will only receive dynamic lighting. Match your mesh mobility to how the object behaves in your game.</p>
                </div>
            </section>

            <!-- Section 5: Performance Implications -->
            <section id="performance" class="lesson-section">
                <h2>Performance Implications</h2>

                <p>Lighting is often the biggest performance factor in real-time rendering. Understanding the costs helps you budget wisely and make informed decisions about where to spend your frame time.</p>

                <h3>Shadow Rendering Costs</h3>

                <p>Shadows are typically the most expensive part of lighting. Each shadow-casting light requires the scene to be rendered from the light's perspective to create a <strong>shadow map</strong>. More lights with shadows = more rendering passes = lower frame rate.</p>

                <p><strong>Shadow cost factors:</strong></p>

                <p><strong>Number of shadow-casting lights:</strong> Each light with Cast Shadows enabled adds rendering overhead. Disable shadows on fill lights and small accent lights when possible.</p>

                <p><strong>Shadow map resolution:</strong> Higher resolution means sharper shadows but more memory and processing. Adjust per-light in the Details panel.</p>

                <p><strong>Shadow distance:</strong> How far shadows render from the camera. Distant shadows can use lower resolution or be disabled entirely.</p>

                <p><strong>Dynamic shadow casters:</strong> Moving objects that cast shadows require shadow map updates every frame. Static shadow casters can be cached.</p>

                <!-- SVG: Shadow Cost Visualization -->
                <svg width="100%" height="220" viewBox="0 0 800 220" style="max-width: 800px; margin: 2rem auto; display: block; border: 2px solid #667eea; border-radius: 8px; background: #f9f9f9;">
                    <text x="400" y="25" text-anchor="middle" fill="#333" font-size="14" font-weight="bold">Shadow Rendering Cost Factors</text>
                    
                    <!-- Number of lights -->
                    <g transform="translate(50, 50)">
                        <rect x="0" y="0" width="160" height="140" rx="8" fill="#fff" stroke="#e74c3c" stroke-width="2"/>
                        <text x="80" y="25" text-anchor="middle" fill="#e74c3c" font-size="11" font-weight="bold">Shadow-Casting Lights</text>
                        
                        <circle cx="40" cy="60" r="12" fill="#f1c40f"/>
                        <circle cx="80" cy="60" r="12" fill="#f1c40f"/>
                        <circle cx="120" cy="60" r="12" fill="#f1c40f"/>
                        
                        <text x="80" y="90" text-anchor="middle" fill="#333" font-size="10">3 lights = 3√ó render passes</text>
                        
                        <rect x="20" y="105" width="120" height="8" fill="#ffcdd2"/>
                        <rect x="20" y="105" width="90" height="8" fill="#e74c3c"/>
                        <text x="80" y="130" text-anchor="middle" fill="#888" font-size="9">High impact</text>
                    </g>
                    
                    <!-- Shadow resolution -->
                    <g transform="translate(240, 50)">
                        <rect x="0" y="0" width="160" height="140" rx="8" fill="#fff" stroke="#FF9800" stroke-width="2"/>
                        <text x="80" y="25" text-anchor="middle" fill="#FF9800" font-size="11" font-weight="bold">Shadow Resolution</text>
                        
                        <rect x="25" y="45" width="30" height="30" fill="#333" stroke="#888"/>
                        <text x="40" y="90" text-anchor="middle" fill="#888" font-size="8">512</text>
                        
                        <rect x="70" y="40" width="40" height="40" fill="#333" stroke="#888"/>
                        <text x="90" y="95" text-anchor="middle" fill="#888" font-size="8">1024</text>
                        
                        <rect x="120" y="35" width="30" height="50" fill="#333" stroke="#888"/>
                        <text x="135" y="100" text-anchor="middle" fill="#888" font-size="8">2048</text>
                        
                        <rect x="20" y="105" width="120" height="8" fill="#ffe0b2"/>
                        <rect x="20" y="105" width="60" height="8" fill="#FF9800"/>
                        <text x="80" y="130" text-anchor="middle" fill="#888" font-size="9">Medium impact</text>
                    </g>
                    
                    <!-- Dynamic casters -->
                    <g transform="translate(430, 50)">
                        <rect x="0" y="0" width="160" height="140" rx="8" fill="#fff" stroke="#9C27B0" stroke-width="2"/>
                        <text x="80" y="25" text-anchor="middle" fill="#9C27B0" font-size="11" font-weight="bold">Dynamic Casters</text>
                        
                        <rect x="30" y="45" width="25" height="35" fill="#667eea"/>
                        <text x="42" y="95" text-anchor="middle" fill="#888" font-size="7">Static</text>
                        
                        <rect x="70" y="45" width="25" height="35" fill="#667eea" stroke="#9C27B0" stroke-width="2"/>
                        <path d="M 82 55 L 88 48 M 82 65 L 90 60" stroke="#9C27B0" stroke-width="2"/>
                        <text x="82" y="95" text-anchor="middle" fill="#9C27B0" font-size="7">Moving</text>
                        
                        <rect x="110" y="45" width="25" height="35" fill="#667eea" stroke="#9C27B0" stroke-width="2"/>
                        <path d="M 122 55 L 128 48 M 122 65 L 130 60" stroke="#9C27B0" stroke-width="2"/>
                        <text x="122" y="95" text-anchor="middle" fill="#9C27B0" font-size="7">Moving</text>
                        
                        <rect x="20" y="105" width="120" height="8" fill="#e1bee7"/>
                        <rect x="20" y="105" width="80" height="8" fill="#9C27B0"/>
                        <text x="80" y="130" text-anchor="middle" fill="#888" font-size="9">Per-frame updates</text>
                    </g>
                    
                    <!-- Cascade distance -->
                    <g transform="translate(620, 50)">
                        <rect x="0" y="0" width="150" height="140" rx="8" fill="#fff" stroke="#4CAF50" stroke-width="2"/>
                        <text x="75" y="25" text-anchor="middle" fill="#4CAF50" font-size="11" font-weight="bold">Shadow Distance</text>
                        
                        <!-- Distance visualization -->
                        <path d="M 30 75 L 130 75" stroke="#888" stroke-width="1"/>
                        <circle cx="30" cy="75" r="8" fill="#f1c40f"/>
                        <text x="30" y="65" text-anchor="middle" fill="#888" font-size="7">Camera</text>
                        
                        <rect x="50" y="70" width="30" height="10" fill="#4CAF50" opacity="0.8"/>
                        <rect x="80" y="70" width="30" height="10" fill="#4CAF50" opacity="0.4"/>
                        <rect x="110" y="70" width="20" height="10" fill="#4CAF50" opacity="0.2"/>
                        
                        <text x="75" y="95" text-anchor="middle" fill="#888" font-size="8">Cascaded shadow maps</text>
                        
                        <rect x="20" y="105" width="110" height="8" fill="#c8e6c9"/>
                        <rect x="20" y="105" width="40" height="8" fill="#4CAF50"/>
                        <text x="75" y="130" text-anchor="middle" fill="#888" font-size="9">Adjustable</text>
                    </g>
                </svg>
                <p class="caption"><em>Figure: Multiple factors contribute to shadow rendering costs‚Äîoptimize each based on importance.</em></p>

                <h3>Light Complexity by Type</h3>

                <p>Different light types have different baseline costs:</p>

                <p><strong>Directional Light:</strong> Typically one per scene for the sun. Uses Cascaded Shadow Maps which are efficient but cover large distances. Moderate cost.</p>

                <p><strong>Spot Light:</strong> Cheapest local light for shadows because it only needs a single shadow map from one direction.</p>

                <p><strong>Point Light:</strong> More expensive than spot lights because omnidirectional shadows require rendering a cubemap (6 faces) instead of one shadow map.</p>

                <p><strong>Rect Light:</strong> Most expensive light type due to area shadow calculations. Use sparingly with shadows enabled.</p>

                <!-- SVG: Cost Comparison -->
                <svg width="100%" height="180" viewBox="0 0 700 180" style="max-width: 700px; margin: 2rem auto; display: block; border: 2px solid #667eea; border-radius: 8px; background: #1e1e1e;">
                    <text x="350" y="25" text-anchor="middle" fill="#fff" font-size="14" font-weight="bold">Relative Shadow Cost by Light Type</text>
                    
                    <!-- Spot Light -->
                    <g transform="translate(50, 50)">
                        <text x="60" y="15" text-anchor="middle" fill="#aaa" font-size="10">Spot Light</text>
                        <rect x="0" y="25" width="120" height="30" fill="#333" rx="3"/>
                        <rect x="0" y="25" width="40" height="30" fill="#4CAF50" rx="3"/>
                        <text x="60" y="45" text-anchor="middle" fill="#fff" font-size="9">Low</text>
                        <text x="60" y="75" text-anchor="middle" fill="#888" font-size="8">1 shadow map</text>
                    </g>
                    
                    <!-- Directional -->
                    <g transform="translate(200, 50)">
                        <text x="60" y="15" text-anchor="middle" fill="#aaa" font-size="10">Directional</text>
                        <rect x="0" y="25" width="120" height="30" fill="#333" rx="3"/>
                        <rect x="0" y="25" width="60" height="30" fill="#FF9800" rx="3"/>
                        <text x="60" y="45" text-anchor="middle" fill="#fff" font-size="9">Medium</text>
                        <text x="60" y="75" text-anchor="middle" fill="#888" font-size="8">Cascades (2-4 maps)</text>
                    </g>
                    
                    <!-- Point Light -->
                    <g transform="translate(350, 50)">
                        <text x="60" y="15" text-anchor="middle" fill="#aaa" font-size="10">Point Light</text>
                        <rect x="0" y="25" width="120" height="30" fill="#333" rx="3"/>
                        <rect x="0" y="25" width="85" height="30" fill="#f44336" rx="3"/>
                        <text x="60" y="45" text-anchor="middle" fill="#fff" font-size="9">High</text>
                        <text x="60" y="75" text-anchor="middle" fill="#888" font-size="8">Cubemap (6 maps)</text>
                    </g>
                    
                    <!-- Rect Light -->
                    <g transform="translate(500, 50)">
                        <text x="75" y="15" text-anchor="middle" fill="#aaa" font-size="10">Rect Light</text>
                        <rect x="0" y="25" width="150" height="30" fill="#333" rx="3"/>
                        <rect x="0" y="25" width="120" height="30" fill="#9C27B0" rx="3"/>
                        <text x="75" y="45" text-anchor="middle" fill="#fff" font-size="9">Highest</text>
                        <text x="75" y="75" text-anchor="middle" fill="#888" font-size="8">Area shadow sampling</text>
                    </g>
                    
                    <!-- Scale legend -->
                    <text x="350" y="120" text-anchor="middle" fill="#888" font-size="10">Shadow cost (with Cast Shadows enabled)</text>
                    
                    <rect x="150" y="135" width="400" height="15" fill="linear-gradient(to right, #4CAF50, #FF9800, #f44336, #9C27B0)" rx="3"/>
                    <text x="150" y="165" fill="#4CAF50" font-size="9">Cheaper</text>
                    <text x="550" y="165" text-anchor="end" fill="#9C27B0" font-size="9">More expensive</text>
                </svg>
                <p class="caption"><em>Figure: Spot lights are cheapest; Rect lights are most expensive when casting shadows.</em></p>

                <h3>Mobility and Performance</h3>

                <p>Your choice of mobility has significant performance implications:</p>

                <p><strong>Static lights:</strong> Zero runtime cost‚Äîall lighting is baked. However, they require lighting build time (which can be hours for complex scenes) and add to lightmap memory usage.</p>

                <p><strong>Stationary lights:</strong> Baked indirect lighting has no runtime cost, but dynamic direct lighting and shadows do cost. Good middle ground for most scenarios.</p>

                <p><strong>Movable lights:</strong> Full runtime cost for everything. Without Lumen, no GI contribution. With Lumen, add Lumen's overhead on top.</p>

                <h3>Lumen Performance Considerations</h3>

                <p>Lumen (UE5's global illumination system) adds its own performance characteristics:</p>

                <p><strong>Software Ray Tracing:</strong> Works on any hardware but uses screen-space information and signed distance fields. Moderate cost, some approximation artifacts.</p>

                <p><strong>Hardware Ray Tracing:</strong> Requires RTX/DXR capable GPU. Higher quality with fewer artifacts. Significant GPU cost but increasingly viable on modern hardware.</p>

                <p>With Lumen, you don't need baked lighting‚Äîall lights can be Movable and still contribute GI. But this comes at a runtime cost that varies based on scene complexity and hardware.</p>

                <div class="card" style="background: #e3f2fd; border-left: 4px solid #2196F3;">
                    <h4>üí° Performance Profiling</h4>
                    <p>Use Unreal's built-in profiling tools to understand where your frame time goes:</p>
                    <ul>
                        <li><strong>stat gpu:</strong> Shows GPU timing breakdown</li>
                        <li><strong>stat shadowrendering:</strong> Shadow-specific stats</li>
                        <li><strong>stat lightrendering:</strong> Light rendering costs</li>
                        <li><strong>ProfileGPU:</strong> Detailed GPU capture</li>
                    </ul>
                    <p>Don't guess about performance‚Äîmeasure and optimize based on data!</p>
                </div>

                <h3>Optimization Strategies</h3>

                <p><strong>Disable shadows on unimportant lights:</strong> Fill lights and ambient lights often don't need shadows. Every shadow-casting light you disable saves significant GPU time.</p>

                <p><strong>Use appropriate shadow resolution:</strong> Distant or less important lights can use lower shadow map resolution without noticeable quality loss.</p>

                <p><strong>Limit dynamic shadow casters:</strong> Use static shadows where possible. Only enable dynamic shadows on objects that actually move.</p>

                <p><strong>Use light functions instead of many lights:</strong> A single light with a cookie/light function can simulate multiple light sources (like light through blinds).</p>

                <p><strong>Consider baking where appropriate:</strong> Even with Lumen available, strategic use of baked lighting for static elements can improve performance significantly.</p>

                <!-- Mermaid: Optimization Decision Tree -->
                <pre class="mermaid">
flowchart TD
    Start["Light Performance Issue?"] --> Q1{"Does light<br/>need shadows?"}
    
    Q1 -->|"No"| A1["Disable Cast Shadows<br/>‚úì Big savings"]
    Q1 -->|"Yes"| Q2{"Does light<br/>move?"}
    
    Q2 -->|"No"| Q3{"Does color/<br/>intensity change?"}
    Q2 -->|"Yes"| A2["Must be Movable<br/>Optimize shadow resolution"]
    
    Q3 -->|"No"| A3["Use Static<br/>‚úì Zero runtime cost"]
    Q3 -->|"Yes"| A4["Use Stationary<br/>‚úì Baked GI + dynamic direct"]
    
    style A1 fill:#4CAF50,color:#fff
    style A3 fill:#4CAF50,color:#fff
    style A4 fill:#FF9800,color:#fff
    style A2 fill:#f44336,color:#fff
                </pre>
                <p class="caption"><em>Figure: Decision tree for optimizing light performance based on requirements.</em></p>
            </section>
            <!-- Section 6: Choosing the Right Approach -->
            <section id="choosing-approach" class="lesson-section">
                <h2>Choosing the Right Approach</h2>

                <p>With so many options available‚Äîlight types, mobility settings, Lumen vs. baked lighting‚Äîhow do you decide what to use? The answer depends on your project's requirements, target hardware, and creative goals.</p>

                <h3>Platform Considerations</h3>

                <p>Your target platform heavily influences lighting decisions:</p>

                <p><strong>High-End PC / Next-Gen Console:</strong> Lumen is viable and recommended for most scenarios. Fully dynamic lighting with real-time GI provides maximum flexibility and visual quality. Hardware ray tracing available for highest quality.</p>

                <p><strong>Mid-Range PC / Current-Gen Console:</strong> Hybrid approaches work well. Use Lumen with Software Ray Tracing, or combine baked indirect lighting (Stationary lights) with dynamic direct lighting. Balance quality and performance based on your specific game.</p>

                <p><strong>Mobile / VR / Low-End PC:</strong> Baked lighting is often essential. Static lights with fully baked lightmaps provide the best performance. Use Movable lights sparingly and without shadows when possible. Forward rendering may be preferred over deferred.</p>

                <!-- SVG: Platform Recommendations -->
                <svg width="100%" height="280" viewBox="0 0 850 280" style="max-width: 850px; margin: 2rem auto; display: block; border: 2px solid #667eea; border-radius: 8px; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);">
                    <text x="425" y="30" text-anchor="middle" fill="#fff" font-size="16" font-weight="bold">Lighting Approach by Platform</text>
                    
                    <!-- High-End -->
                    <g transform="translate(30, 55)">
                        <rect x="0" y="0" width="250" height="195" rx="10" fill="rgba(76,175,80,0.15)" stroke="#4CAF50" stroke-width="2"/>
                        <text x="125" y="30" text-anchor="middle" fill="#4CAF50" font-size="13" font-weight="bold">üñ•Ô∏è High-End PC / PS5 / XSX</text>
                        
                        <text x="20" y="60" fill="#fff" font-size="11" font-weight="bold">Recommended:</text>
                        <text x="20" y="80" fill="#aaa" font-size="10">‚Ä¢ Lumen (Hardware RT if available)</text>
                        <text x="20" y="95" fill="#aaa" font-size="10">‚Ä¢ Movable lights with shadows</text>
                        <text x="20" y="110" fill="#aaa" font-size="10">‚Ä¢ Dynamic time of day</text>
                        <text x="20" y="125" fill="#aaa" font-size="10">‚Ä¢ No baking required</text>
                        
                        <line x1="20" y1="140" x2="230" y2="140" stroke="#4CAF50" opacity="0.3"/>
                        
                        <text x="20" y="160" fill="#4CAF50" font-size="10">‚úì Maximum flexibility</text>
                        <text x="20" y="175" fill="#4CAF50" font-size="10">‚úì Fully dynamic GI</text>
                        <text x="20" y="190" fill="#888" font-size="9">Targets: 60fps @ 1440p+</text>
                    </g>
                    
                    <!-- Mid-Range -->
                    <g transform="translate(300, 55)">
                        <rect x="0" y="0" width="250" height="195" rx="10" fill="rgba(255,152,0,0.15)" stroke="#FF9800" stroke-width="2"/>
                        <text x="125" y="30" text-anchor="middle" fill="#FF9800" font-size="13" font-weight="bold">üéÆ Mid-Range / Current-Gen</text>
                        
                        <text x="20" y="60" fill="#fff" font-size="11" font-weight="bold">Recommended:</text>
                        <text x="20" y="80" fill="#aaa" font-size="10">‚Ä¢ Lumen (Software RT)</text>
                        <text x="20" y="95" fill="#aaa" font-size="10">‚Ä¢ OR Stationary lights + baking</text>
                        <text x="20" y="110" fill="#aaa" font-size="10">‚Ä¢ Selective shadow casting</text>
                        <text x="20" y="125" fill="#aaa" font-size="10">‚Ä¢ Limited dynamic lights</text>
                        
                        <line x1="20" y1="140" x2="230" y2="140" stroke="#FF9800" opacity="0.3"/>
                        
                        <text x="20" y="160" fill="#FF9800" font-size="10">‚úì Good balance</text>
                        <text x="20" y="175" fill="#FF9800" font-size="10">‚úì Hybrid approach works</text>
                        <text x="20" y="190" fill="#888" font-size="9">Targets: 30-60fps @ 1080p</text>
                    </g>
                    
                    <!-- Low-End / Mobile -->
                    <g transform="translate(570, 55)">
                        <rect x="0" y="0" width="250" height="195" rx="10" fill="rgba(244,67,54,0.15)" stroke="#f44336" stroke-width="2"/>
                        <text x="125" y="30" text-anchor="middle" fill="#f44336" font-size="13" font-weight="bold">üì± Mobile / VR / Low-End</text>
                        
                        <text x="20" y="60" fill="#fff" font-size="11" font-weight="bold">Recommended:</text>
                        <text x="20" y="80" fill="#aaa" font-size="10">‚Ä¢ Static lights (fully baked)</text>
                        <text x="20" y="95" fill="#aaa" font-size="10">‚Ä¢ Minimal Movable lights</text>
                        <text x="20" y="110" fill="#aaa" font-size="10">‚Ä¢ Shadows disabled or baked</text>
                        <text x="20" y="125" fill="#aaa" font-size="10">‚Ä¢ Forward rendering</text>
                        
                        <line x1="20" y1="140" x2="230" y2="140" stroke="#f44336" opacity="0.3"/>
                        
                        <text x="20" y="160" fill="#f44336" font-size="10">‚úì Maximum performance</text>
                        <text x="20" y="175" fill="#f44336" font-size="10">‚úì Battery/thermal friendly</text>
                        <text x="20" y="190" fill="#888" font-size="9">Targets: 60-90fps (VR critical)</text>
                    </g>
                </svg>
                <p class="caption"><em>Figure: Target platform determines which lighting approaches are viable.</em></p>

                <h3>Project Type Considerations</h3>

                <p>Different types of projects have different lighting needs:</p>

                <p><strong>Open World Games:</strong> Time of day is often important. Lumen excels here because it handles the constantly changing sun position. Alternatively, use a Stationary Directional Light and accept that GI won't update with sun position (or use time-of-day-specific lightmap bakes).</p>

                <p><strong>Linear Story Games:</strong> Controlled environments allow for heavily optimized, baked lighting. You know exactly what players will see, so you can craft perfect lighting for each area. Mixed Stationary/Static lighting often works well.</p>

                <p><strong>Multiplayer Shooters:</strong> Consistent frame rate is critical. Simpler lighting with Stationary or Static lights often preferred. Dynamic elements (muzzle flash, explosions) can be Movable without shadows.</p>

                <p><strong>Horror Games:</strong> Dynamic lighting (flashlights, flickering lights) is essential for atmosphere. Lumen or Movable lights are often necessary for core mechanics, but can be balanced with baked ambient lighting.</p>

                <p><strong>Architectural Visualization:</strong> Quality is paramount, interactivity requirements are low. Static baked lighting with high-quality lightmaps often produces the best results. Lumen also excellent for real-time client walkthroughs.</p>

                <h3>Common Lighting Scenarios</h3>

                <p>Here are recommended approaches for typical scenarios:</p>

                <h4>Outdoor Daytime Scene</h4>
                <p><strong>Key Light:</strong> Directional Light (Stationary or Movable) for sun</p>
                <p><strong>Sky:</strong> Sky Atmosphere + SkyLight (Stationary or Movable)</p>
                <p><strong>Fill:</strong> Exponential Height Fog for atmospheric depth</p>
                <p><strong>Approach:</strong> With Lumen: all Movable, dynamic time of day possible. Without Lumen: Stationary sun with baked GI, fixed time.</p>

                <h4>Indoor Room with Windows</h4>
                <p><strong>Key Light:</strong> Directional Light coming through windows</p>
                <p><strong>Fill:</strong> Rect Lights at window positions for soft interior fill</p>
                <p><strong>Practical Lights:</strong> Point/Spot lights for lamps, ceiling fixtures</p>
                <p><strong>Approach:</strong> Stationary for main lights, Static for decorative lights that won't change.</p>

                <h4>Underground/Cave Environment</h4>
                <p><strong>Key Light:</strong> None (no sun)</p>
                <p><strong>Practical Lights:</strong> Point lights for torches, Spot lights for focused areas</p>
                <p><strong>Emissive:</strong> Glowing crystals, bioluminescence via emissive materials</p>
                <p><strong>Approach:</strong> Heavy use of Static lights for ambient, select Stationary for important hero lights.</p>

                <h4>Night Scene with Artificial Lighting</h4>
                <p><strong>Key Light:</strong> Dim Directional for moonlight (optional)</p>
                <p><strong>Practical Lights:</strong> Street lights (Spot), building windows (Rect), car headlights (Spot Movable)</p>
                <p><strong>Approach:</strong> Stationary for static fixtures, Movable for vehicle lights and interactive elements.</p>

                <!-- Mermaid: Scenario Decision -->
                <pre class="mermaid">
flowchart TD
    Start["What's your scenario?"] --> Q1{"Outdoor with<br/>changing sun?"}
    
    Q1 -->|Yes| A1["Lumen recommended<br/>Movable Directional Light"]
    Q1 -->|No/Fixed time| Q2{"Interior<br/>heavy scene?"}
    
    Q2 -->|Yes| Q3{"Performance<br/>critical?"}
    Q2 -->|"Outdoor fixed"| A2["Stationary Directional<br/>+ Baked GI"]
    
    Q3 -->|Yes| A3["Static lights<br/>Fully baked"]
    Q3 -->|"Quality focus"| A4["Stationary lights<br/>+ select Movable"]
    
    A1 --> R1["Dynamic time of day<br/>Full GI response"]
    A2 --> R2["Good GI<br/>Fixed lighting"]
    A3 --> R3["Best performance<br/>No flexibility"]
    A4 --> R4["Balanced approach<br/>Some dynamic capability"]
    
    style A1 fill:#4CAF50,color:#fff
    style A2 fill:#FF9800,color:#fff
    style A3 fill:#2196F3,color:#fff
    style A4 fill:#9C27B0,color:#fff
                </pre>
                <p class="caption"><em>Figure: Match your lighting approach to your scenario requirements.</em></p>

                <h3>Iteration and Flexibility</h3>

                <p>One often overlooked factor: <strong>iteration speed</strong>. During development, you'll adjust lighting constantly. Consider:</p>

                <p><strong>Lumen:</strong> Changes are instant‚Äîmove a light, see the result immediately. Excellent for iteration but requires appropriate hardware during development.</p>

                <p><strong>Baked Lighting:</strong> Every change requires a lighting build. Production builds can take hours for complex scenes. Use Preview quality during development, Production quality for final builds.</p>

                <p>Many teams use Lumen during development for fast iteration, then evaluate whether to ship with Lumen or switch to baked lighting for performance based on target platform requirements.</p>

                <div class="card" style="background: #e8f5e9; border-left: 4px solid #4CAF50;">
                    <h4>‚úÖ Pro Tip: Start Simple, Add Complexity</h4>
                    <p>Begin with the simplest lighting that achieves your goals:</p>
                    <ol>
                        <li>One Directional Light (sun or moon)</li>
                        <li>One SkyLight for ambient fill</li>
                        <li>Add local lights only where needed</li>
                        <li>Enable shadows selectively</li>
                        <li>Profile and optimize</li>
                    </ol>
                    <p>It's easier to add complexity than to simplify an over-lit scene!</p>
                </div>

                <h3>The Lighting Pipeline Summary</h3>

                <!-- SVG: Lighting Pipeline -->
                <svg width="100%" height="200" viewBox="0 0 850 200" style="max-width: 850px; margin: 2rem auto; display: block; border: 2px solid #667eea; border-radius: 8px; background: #f9f9f9;">
                    <text x="425" y="25" text-anchor="middle" fill="#333" font-size="14" font-weight="bold">Typical Lighting Workflow</text>
                    
                    <!-- Step 1 -->
                    <g transform="translate(30, 50)">
                        <circle cx="40" cy="40" r="35" fill="#667eea"/>
                        <text x="40" y="45" text-anchor="middle" fill="#fff" font-size="16" font-weight="bold">1</text>
                        <text x="40" y="100" text-anchor="middle" fill="#333" font-size="10" font-weight="bold">Block Out</text>
                        <text x="40" y="115" text-anchor="middle" fill="#666" font-size="8">Basic geometry</text>
                        <text x="40" y="127" text-anchor="middle" fill="#666" font-size="8">Simple materials</text>
                    </g>
                    
                    <!-- Arrow -->
                    <path d="M 115 90 L 145 90" stroke="#667eea" stroke-width="2" marker-end="url(#arrowPurple)"/>
                    <defs>
                        <marker id="arrowPurple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#667eea"/>
                        </marker>
                    </defs>
                    
                    <!-- Step 2 -->
                    <g transform="translate(160, 50)">
                        <circle cx="40" cy="40" r="35" fill="#667eea"/>
                        <text x="40" y="45" text-anchor="middle" fill="#fff" font-size="16" font-weight="bold">2</text>
                        <text x="40" y="100" text-anchor="middle" fill="#333" font-size="10" font-weight="bold">Key Light</text>
                        <text x="40" y="115" text-anchor="middle" fill="#666" font-size="8">Sun or main light</text>
                        <text x="40" y="127" text-anchor="middle" fill="#666" font-size="8">Establish direction</text>
                    </g>
                    
                    <!-- Arrow -->
                    <path d="M 245 90 L 275 90" stroke="#667eea" stroke-width="2" marker-end="url(#arrowPurple)"/>
                    
                    <!-- Step 3 -->
                    <g transform="translate(290, 50)">
                        <circle cx="40" cy="40" r="35" fill="#667eea"/>
                        <text x="40" y="45" text-anchor="middle" fill="#fff" font-size="16" font-weight="bold">3</text>
                        <text x="40" y="100" text-anchor="middle" fill="#333" font-size="10" font-weight="bold">Sky + Ambient</text>
                        <text x="40" y="115" text-anchor="middle" fill="#666" font-size="8">SkyLight, fog</text>
                        <text x="40" y="127" text-anchor="middle" fill="#666" font-size="8">Fill shadows</text>
                    </g>
                    
                    <!-- Arrow -->
                    <path d="M 375 90 L 405 90" stroke="#667eea" stroke-width="2" marker-end="url(#arrowPurple)"/>
                    
                    <!-- Step 4 -->
                    <g transform="translate(420, 50)">
                        <circle cx="40" cy="40" r="35" fill="#667eea"/>
                        <text x="40" y="45" text-anchor="middle" fill="#fff" font-size="16" font-weight="bold">4</text>
                        <text x="40" y="100" text-anchor="middle" fill="#333" font-size="10" font-weight="bold">Local Lights</text>
                        <text x="40" y="115" text-anchor="middle" fill="#666" font-size="8">Practical sources</text>
                        <text x="40" y="127" text-anchor="middle" fill="#666" font-size="8">Accent lighting</text>
                    </g>
                    
                    <!-- Arrow -->
                    <path d="M 505 90 L 535 90" stroke="#667eea" stroke-width="2" marker-end="url(#arrowPurple)"/>
                    
                    <!-- Step 5 -->
                    <g transform="translate(550, 50)">
                        <circle cx="40" cy="40" r="35" fill="#667eea"/>
                        <text x="40" y="45" text-anchor="middle" fill="#fff" font-size="16" font-weight="bold">5</text>
                        <text x="40" y="100" text-anchor="middle" fill="#333" font-size="10" font-weight="bold">Build / Enable</text>
                        <text x="40" y="115" text-anchor="middle" fill="#666" font-size="8">Bake or Lumen</text>
                        <text x="40" y="127" text-anchor="middle" fill="#666" font-size="8">GI calculation</text>
                    </g>
                    
                    <!-- Arrow -->
                    <path d="M 635 90 L 665 90" stroke="#667eea" stroke-width="2" marker-end="url(#arrowPurple)"/>
                    
                    <!-- Step 6 -->
                    <g transform="translate(680, 50)">
                        <circle cx="40" cy="40" r="35" fill="#4CAF50"/>
                        <text x="40" y="45" text-anchor="middle" fill="#fff" font-size="16" font-weight="bold">6</text>
                        <text x="40" y="100" text-anchor="middle" fill="#333" font-size="10" font-weight="bold">Polish</text>
                        <text x="40" y="115" text-anchor="middle" fill="#666" font-size="8">Post process</text>
                        <text x="40" y="127" text-anchor="middle" fill="#666" font-size="8">Fine tuning</text>
                    </g>
                    
                    <!-- Bottom note -->
                    <rect x="150" y="155" width="550" height="30" rx="5" fill="rgba(102,126,234,0.1)" stroke="#667eea"/>
                    <text x="425" y="175" text-anchor="middle" fill="#667eea" font-size="10">Iterate! Return to earlier steps as needed. Lighting is refined throughout production.</text>
                </svg>
                <p class="caption"><em>Figure: A typical lighting workflow from blockout to polish.</em></p>
            </section>

            <!-- Section 7: Summary -->
            <section id="summary" class="lesson-section">
                <h2>Summary</h2>

                <p>You now have a solid foundation in real-time lighting concepts. Let's recap the essential knowledge:</p>

                <div class="card" style="background: #f5f5f5; border-left: 4px solid #667eea;">
                    <h4>üéØ Key Takeaways</h4>
                    
                    <p><strong>Real-time lighting</strong> operates under strict time constraints (milliseconds per frame), requiring approximations and strategic choices unlike offline rendering's unlimited computation time.</p>

                    <p><strong>Direct lighting</strong> travels straight from source to surface, creating highlights and hard shadows. <strong>Indirect lighting (GI)</strong> bounces between surfaces, filling shadows and transferring color. Both are essential for realistic scenes.</p>

                    <p><strong>Four light types</strong> serve different purposes: <strong>Directional</strong> (sun/moon), <strong>Point</strong> (bulbs, omni), <strong>Spot</strong> (focused beams), and <strong>Rect</strong> (soft area lights). Choose based on the real-world source you're simulating.</p>

                    <p><strong>Light Mobility</strong> determines flexibility and cost: <strong>Static</strong> (fully baked, zero cost, no changes), <strong>Stationary</strong> (baked GI + dynamic direct, best balance), <strong>Movable</strong> (fully dynamic, highest cost).</p>

                    <p><strong>Performance</strong> is heavily influenced by shadow-casting lights. Optimize by disabling unnecessary shadows, using appropriate resolutions, and choosing the right mobility for each light.</p>

                    <p><strong>Platform and project type</strong> should guide your approach. High-end platforms can leverage Lumen; mobile/VR often requires baked lighting. Match your technique to your constraints.</p>
                </div>

                <h3>Light Types Quick Reference</h3>

                <!-- Compact reference table -->
                <svg width="100%" height="160" viewBox="0 0 800 160" style="max-width: 800px; margin: 2rem auto; display: block; border: 2px solid #667eea; border-radius: 8px; background: #fff;">
                    <!-- Headers -->
                    <rect x="0" y="0" width="200" height="40" fill="#667eea"/>
                    <text x="100" y="25" text-anchor="middle" fill="#fff" font-size="12" font-weight="bold">Light Type</text>
                    
                    <rect x="200" y="0" width="300" height="40" fill="#667eea"/>
                    <text x="350" y="25" text-anchor="middle" fill="#fff" font-size="12" font-weight="bold">Use For</text>
                    
                    <rect x="500" y="0" width="300" height="40" fill="#667eea"/>
                    <text x="650" y="25" text-anchor="middle" fill="#fff" font-size="12" font-weight="bold">Key Characteristic</text>
                    
                    <!-- Directional -->
                    <rect x="0" y="40" width="200" height="30" fill="#f5f5f5" stroke="#ddd"/>
                    <text x="100" y="60" text-anchor="middle" fill="#333" font-size="11">‚òÄÔ∏è Directional</text>
                    <rect x="200" y="40" width="300" height="30" fill="#f5f5f5" stroke="#ddd"/>
                    <text x="350" y="60" text-anchor="middle" fill="#555" font-size="10">Sun, moon, distant sources</text>
                    <rect x="500" y="40" width="300" height="30" fill="#f5f5f5" stroke="#ddd"/>
                    <text x="650" y="60" text-anchor="middle" fill="#555" font-size="10">Parallel rays, rotation only matters</text>
                    
                    <!-- Point -->
                    <rect x="0" y="70" width="200" height="30" fill="#fff" stroke="#ddd"/>
                    <text x="100" y="90" text-anchor="middle" fill="#333" font-size="11">üí° Point</text>
                    <rect x="200" y="70" width="300" height="30" fill="#fff" stroke="#ddd"/>
                    <text x="350" y="90" text-anchor="middle" fill="#555" font-size="10">Light bulbs, candles, fires</text>
                    <rect x="500" y="70" width="300" height="30" fill="#fff" stroke="#ddd"/>
                    <text x="650" y="90" text-anchor="middle" fill="#555" font-size="10">Omnidirectional, distance falloff</text>
                    
                    <!-- Spot -->
                    <rect x="0" y="100" width="200" height="30" fill="#f5f5f5" stroke="#ddd"/>
                    <text x="100" y="120" text-anchor="middle" fill="#333" font-size="11">üî¶ Spot</text>
                    <rect x="200" y="100" width="300" height="30" fill="#f5f5f5" stroke="#ddd"/>
                    <text x="350" y="120" text-anchor="middle" fill="#555" font-size="10">Flashlights, stage lights, accents</text>
                    <rect x="500" y="100" width="300" height="30" fill="#f5f5f5" stroke="#ddd"/>
                    <text x="650" y="120" text-anchor="middle" fill="#555" font-size="10">Cone shape, inner/outer angles</text>
                    
                    <!-- Rect -->
                    <rect x="0" y="130" width="200" height="30" fill="#fff" stroke="#ddd"/>
                    <text x="100" y="150" text-anchor="middle" fill="#333" font-size="11">üì∫ Rect</text>
                    <rect x="200" y="130" width="300" height="30" fill="#fff" stroke="#ddd"/>
                    <text x="350" y="150" text-anchor="middle" fill="#555" font-size="10">Windows, screens, soft boxes</text>
                    <rect x="500" y="130" width="300" height="30" fill="#fff" stroke="#ddd"/>
                    <text x="650" y="150" text-anchor="middle" fill="#555" font-size="10">Area source, soft shadows</text>
                </svg>

                <h3>Mobility Quick Reference</h3>

                <svg width="100%" height="130" viewBox="0 0 800 130" style="max-width: 800px; margin: 2rem auto; display: block; border: 2px solid #667eea; border-radius: 8px; background: #fff;">
                    <!-- Headers -->
                    <rect x="0" y="0" width="160" height="40" fill="#667eea"/>
                    <text x="80" y="25" text-anchor="middle" fill="#fff" font-size="12" font-weight="bold">Mobility</text>
                    
                    <rect x="160" y="0" width="160" height="40" fill="#667eea"/>
                    <text x="240" y="25" text-anchor="middle" fill="#fff" font-size="12" font-weight="bold">Runtime Cost</text>
                    
                    <rect x="320" y="0" width="200" height="40" fill="#667eea"/>
                    <text x="420" y="25" text-anchor="middle" fill="#fff" font-size="12" font-weight="bold">Can Change</text>
                    
                    <rect x="520" y="0" width="280" height="40" fill="#667eea"/>
                    <text x="660" y="25" text-anchor="middle" fill="#fff" font-size="12" font-weight="bold">Best For</text>
                    
                    <!-- Static -->
                    <rect x="0" y="40" width="160" height="30" fill="#c8e6c9" stroke="#ddd"/>
                    <text x="80" y="60" text-anchor="middle" fill="#2e7d32" font-size="11" font-weight="bold">Static</text>
                    <rect x="160" y="40" width="160" height="30" fill="#c8e6c9" stroke="#ddd"/>
                    <text x="240" y="60" text-anchor="middle" fill="#2e7d32" font-size="10">Zero</text>
                    <rect x="320" y="40" width="200" height="30" fill="#c8e6c9" stroke="#ddd"/>
                    <text x="420" y="60" text-anchor="middle" fill="#2e7d32" font-size="10">Nothing</text>
                    <rect x="520" y="40" width="280" height="30" fill="#c8e6c9" stroke="#ddd"/>
                    <text x="660" y="60" text-anchor="middle" fill="#2e7d32" font-size="10">Arch viz, unchanging environments</text>
                    
                    <!-- Stationary -->
                    <rect x="0" y="70" width="160" height="30" fill="#ffe0b2" stroke="#ddd"/>
                    <text x="80" y="90" text-anchor="middle" fill="#e65100" font-size="11" font-weight="bold">Stationary</text>
                    <rect x="160" y="70" width="160" height="30" fill="#ffe0b2" stroke="#ddd"/>
                    <text x="240" y="90" text-anchor="middle" fill="#e65100" font-size="10">Medium</text>
                    <rect x="320" y="70" width="200" height="30" fill="#ffe0b2" stroke="#ddd"/>
                    <text x="420" y="90" text-anchor="middle" fill="#e65100" font-size="10">Color, intensity</text>
                    <rect x="520" y="70" width="280" height="30" fill="#ffe0b2" stroke="#ddd"/>
                    <text x="660" y="90" text-anchor="middle" fill="#e65100" font-size="10">Most game scenarios</text>
                    
                    <!-- Movable -->
                    <rect x="0" y="100" width="160" height="30" fill="#ffcdd2" stroke="#ddd"/>
                    <text x="80" y="120" text-anchor="middle" fill="#c62828" font-size="11" font-weight="bold">Movable</text>
                    <rect x="160" y="100" width="160" height="30" fill="#ffcdd2" stroke="#ddd"/>
                    <text x="240" y="120" text-anchor="middle" fill="#c62828" font-size="10">High</text>
                    <rect x="320" y="100" width="200" height="30" fill="#ffcdd2" stroke="#ddd"/>
                    <text x="420" y="120" text-anchor="middle" fill="#c62828" font-size="10">Everything</text>
                    <rect x="520" y="100" width="280" height="30" fill="#ffcdd2" stroke="#ddd"/>
                    <text x="660" y="120" text-anchor="middle" fill="#c62828" font-size="10">Flashlights, Lumen, moving lights</text>
                </svg>

                <h3>What's Next?</h3>

                <p>With these fundamentals in place, you're ready to start lighting actual scenes. In the next lesson, we'll focus on <strong>outdoor lighting</strong>‚Äîsetting up the Directional Light as the sun, configuring the Sky Atmosphere for realistic skies, adding atmospheric fog, and using SkyLight for proper ambient illumination. You'll create a complete outdoor daytime environment from scratch.</p>

                <p>The concepts from this lesson will guide every lighting decision you make. Return here whenever you need to refresh your understanding of light types, mobility, or performance considerations.</p>
            </section>

            <!-- Lesson Navigation -->
            <nav class="lesson-nav" aria-label="Lesson navigation">
                <a href="m03_l05_special_material_types.html" class="btn">‚Üê Previous: Special Material Types</a>
                <a href="index.html" class="btn btn-outline">Course Home</a>
                <a href="m04_l02_directional_light_and_sky.html" class="btn">Next: The Directional Light and Sky ‚Üí</a>
            </nav>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2025 Introduction to Unreal Engine 5 Course. Part of the Practical Ace learning series.</p>
            <nav aria-label="Footer navigation">
                <a href="index.html">Home</a>
                <a href="index.html#modules">All Modules</a>
            </nav>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // Progress indicator
        window.addEventListener('scroll', () => {
            const docHeight = document.documentElement.scrollHeight - window.innerHeight;
            const scrolled = (window.scrollY / docHeight) * 100;
            document.querySelector('.progress-bar').style.width = scrolled + '%';
        });

        // Mobile menu toggle
        const menuToggle = document.getElementById('mobile-menu-toggle');
        const navLinks = document.getElementById('nav-links');
        
        menuToggle?.addEventListener('click', () => {
            const expanded = menuToggle.getAttribute('aria-expanded') === 'true';
            menuToggle.setAttribute('aria-expanded', !expanded);
            navLinks.classList.toggle('active');
        });

        // Theme toggle
        const themeToggle = document.getElementById('theme-toggle');
        const savedTheme = localStorage.getItem('theme');
        
        if (savedTheme === 'dark') {
            document.body.classList.add('dark-mode');
            themeToggle.textContent = '‚òÄÔ∏è';
        }

        themeToggle?.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            themeToggle.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
        });

        // Smooth scrolling for TOC links
        document.querySelectorAll('.toc-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('href').slice(1);
                const target = document.getElementById(targetId);
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    history.pushState(null, null, `#${targetId}`);
                }
            });
        });
    </script>
</body>
</html>
